name: üìã Valida√ß√£o de Pull Request

on:
  pull_request:
    types: [opened, edited, synchronize]

jobs:
  validate-pr-template:
    name: Verificar preenchimento do PR
    runs-on: ubuntu-latest

    steps:
      - name: Validar se todas as se√ß√µes est√£o presentes
        uses: actions/github-script@v7
        with:
          script: |
            const body = context.payload.pull_request.body || "";
            const requiredSections = [
              "# üìÑ Descri√ß√£o",
              "# üîó Tarefa(s) Relacionada(s)",
              "# ‚úÖ Checklist",
              "# üöÄ Como testar este PR?"
            ];

            const missing = requiredSections.filter(section => !body.includes(section));

            if (missing.length > 0) {
              core.setFailed(`‚ùå O PR est√° incompleto. Faltando se√ß√£o(√µes): ${missing.join(", ")}`);
            } else {
              core.info("‚úÖ Todas as se√ß√µes obrigat√≥rias est√£o presentes.");
            }
